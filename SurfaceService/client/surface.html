<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/surface.css">
    <title>Surface</title>
</head>
<body>
<h1>CreaStorm - Brainstorm vanguard ideas</h1>
<img src="../../ReferencesExample/2548948-9379357714-Rebor.jpg"/>
<img src="../../ReferencesExample/blade_runner1_920_505_80.jpg"/>
<img src="../../ReferencesExample/china-town-david-cheung.jpg"/>
<img src="../../ReferencesExample/cyberpunk-trailer-concept-art.jpg"/>
<img src="../../ReferencesExample/lower_hengsha_street_by_gryphart-d35y5o5.jpg"/>
<img src="../../ReferencesExample/maxresdefault.jpg"/>
<img src="../../ReferencesExample/Neo-Tokyo.jpg"/>
<img src="../../ReferencesExample/Neo_Seoul_Road.jpg"/>
<img src="../../ReferencesExample/neoseoul.jpg"/>

</body>

<script>
    var zindex = 0;
    var offset = [0,0];
    var images = document.images;
    for(var i=0; i< images.length; i++){
        initializeDragAndDrop(images[i]);
        console.log(images[i]);
    }


    function initializeDragAndDrop(div){

        div.addEventListener('mousedown', function(e) {
                div.setAttribute("mousedown","true");
            div.style.position="absolute";
                div.style.zIndex=++zindex;
            offset = [
                div.offsetLeft - e.clientX,
                div.offsetTop - e.clientY
            ];
        }, true);

        div.addEventListener('mouseup', function(e) {

            div.setAttribute("mousedown","false");


        }, true);


        div.addEventListener('mousemove', function(event) {
            event.preventDefault();
            if (div.getAttribute("mousedown")==="true" ) {

                div.style.left = (event.clientX + offset[0]) + 'px';
                div.style.top  = (event.clientY + offset[1]) + 'px';
            }
        }, true);
    }



    function allElementsFromPoint(x, y) {
        var element, elements = [];
        var old_visibility = [];
        while (true) {
            element = document.elementFromPoint(x, y);
            if (!element || element === document.documentElement) {
                break;
            }
            elements.push(element);
            old_visibility.push(element.style.visibility);
            element.style.visibility = 'hidden'; // Temporarily hide the element (without changing the layout)
        }
        for (var k = 0; k < elements.length; k++) {
            elements[k].style.visibility = old_visibility[k];
        }
        elements.reverse();
        return elements;
    }

    function mouseAboveClass(x,y,classe){
        var elements = allElementsFromPoint(x, y);
        var arrayLength = elements.length;
        for (var i = 0; i < arrayLength; i++) {
            if (elements[i].classList.contains(classe)){
                return elements[i];
            }
        }
        return false;
    }

    function nbElemUnderMouse(x,y,classe){
        var elements = allElementsFromPoint(x,y);
        var arrayLength = elements.length;
        var res = 0;
        for (var i = 0; i < arrayLength; i++) {
            if (elements[i].classList.contains(classe)){
                res++;
            }
        }
        return res;
    }

</script>

</script>
</html>